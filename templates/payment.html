{% extends 'base.html' %}
{% block content %}

<div class="small-container" style="max-width:600px; margin:auto; text-align:center;">
    <h2>Payment Gateway</h2>
    <p>Please enter your payment details below to complete your booking.</p>

    <table style="width:100%; border-collapse: collapse; margin-bottom:20px;">
        <tr style="background-color:#f2f2f2; text-align:left;">
            <th style="padding:10px;">Event</th>
            <th style="padding:10px;">Guest Count</th>
            <th style="padding:10px;">Price/Guest</th>
            <th style="padding:10px;">Total</th>
        </tr>
        {% for item in cart_items %}
        <tr style="border-bottom:1px solid #ddd;">
            <td style="padding:10px;">{{ item.event.title }}</td>
            <td style="padding:10px;">{{ item.guestcount }}</td>
            <td style="padding:10px;">${{ item.event.price }}</td>
            <td style="padding:10px;">${{ item.event.price|mul:item.guestcount }}</td>
        </tr>
        {% endfor %}
    </table>

    <h3>Total Amount: ${{ total_amount }}</h3>

    <form method="POST" action="{% url 'process_payment' %}" 
          style="display:flex; flex-direction:column; gap:15px; text-align:left; margin-top:30px;">
        {% csrf_token %}

        <label>Cardholder Name</label>
        <input type="text" name="card_name" required style="padding:10px; border:1px solid #ccc; border-radius:5px;">

        <label>Card Number</label>
        <input type="text" name="card_number" maxlength="16" required style="padding:10px; border:1px solid #ccc; border-radius:5px;">

        <div style="display:flex; gap:10px;">
            <div style="flex:1;">
                <label>Expiry Date</label>
                <input type="text" name="expiry" placeholder="MM/YY" required style="padding:10px; border:1px solid #ccc; border-radius:5px;">
            </div>
            <div style="flex:1;">
                <label>CVV</label>
                <input type="password" name="cvv" maxlength="3" required style="padding:10px; border:1px solid #ccc; border-radius:5px;">
            </div>
        </div>

        <button type="submit" 
                style="margin-top:20px; background:#4CAF50; color:#fff; padding:10px 15px; border:none; border-radius:5px; cursor:pointer;">
            Pay Now
        </button>
    </form>
</div>

{% endblock %}
